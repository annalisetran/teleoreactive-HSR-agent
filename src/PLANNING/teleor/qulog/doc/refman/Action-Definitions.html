<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This manual is for QuLog/TeleoR (version 1.0, 21 February 2024).

Copyright (C) 2015 Peter Robinson, Keith Clark

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
 -->
<title>Action Definitions (The QuLog/TeleoR 1.0 Reference Manual)</title>

<meta name="description" content="Action Definitions (The QuLog/TeleoR 1.0 Reference Manual)">
<meta name="keywords" content="Action Definitions (The QuLog/TeleoR 1.0 Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="QuLog-Index.html" rel="index" title="QuLog Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Programs.html" rel="up" title="Programs">
<link href="Function-Definitions.html" rel="next" title="Function Definitions">
<link href="Relation-Definitions.html" rel="prev" title="Relation Definitions">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<div class="subsection" id="Action-Definitions">
<div class="header">
<p>
Next: <a href="Function-Definitions.html" accesskey="n" rel="next">Function Definitions</a>, Previous: <a href="Relation-Definitions.html" accesskey="p" rel="prev">Relation Definitions</a>, Up: <a href="Programs.html" accesskey="u" rel="up">Programs</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="QuLog-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Action-Definitions-1"></span><h4 class="subsection">4.10.6 Action Definitions</h4>
<span id="index-Action-Definitions"></span>
<p>An action definition consists of a sequence of rules of the form
</p>

<blockquote class="indentedblock">
<p><i>Head</i><code> :: </code><i>Commit</i><code> ~&gt; </code><i>Actions</i>
</p></blockquote>


<p>where <i>Head</i> and <i>Commit</i> are the same as for relation rules
and <i>Actions</i> is a an action sequence.
</p>
<p>The
<code> :: </code><i>Commit</i> 
part of the rule is optional.
The heads of each rule of an action have the same 
functor and arity. 
</p>
<p>The semantics of action definitions is the nearly the same as for relation definitions.
The first difference is that <i>Actions</i>
is a sequence of actions rather than a sequence of relations. The second difference is that
backtracking is only local to the <i>Commit</i>. So that, even if the rules don&rsquo;t have a <i>Commit</i>, backtracking will not try other rules.
</p>
<p>Also, for each action definition, the compiler adds a catchall rule to the end of the defined rules which raises an exception. This means that, if a call to an action does not match any of the defined rules then an exception will be raised as opposed to failure occurring (as would happen in a relation definition). This is also true for builtin actions. All builtin actions are also deterministic (i.e. no choice points are created by calling a builtin action). A consequence of this is that user defined actions also have this property. That is all actions are deterministic and all actions raise an exception rather than failing if no matches are found.
</p>
<p>Below is an action definition example from <code>examples/introduction/qlexamples.qlg</code>.
</p><div class="example">
<pre class="example">act birthday(!human)
birthday(P) :: person(P, _, A) &amp; Z = A+1 &amp; type(Z, age) ~&gt; 
        forget_remember([age_of(P, A)], [age_of(P, Z)])
birthday(P) ~&gt;
    write_list([P,' has no recorded age or already has max age'])
</pre></div>
<p>The guard of the first rule looks up the age of the person and also type checks <code>Z</code> - this is necessary as <code>A+1</code> is not guaranteed to be of type <code>age</code>. This guard could fail, either because <code>P</code> is not in the belief store as a person or because P was <code>110</code> old and <code>111</code> is not of type <code>age</code>. If the second rule was not present, then this situation would cause a
<code>no_matching_action_rule</code> exception to be raised.
</p>
</div>
<hr>
<div class="header">
<p>
Next: <a href="Function-Definitions.html">Function Definitions</a>, Previous: <a href="Relation-Definitions.html">Relation Definitions</a>, Up: <a href="Programs.html">Programs</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="QuLog-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
